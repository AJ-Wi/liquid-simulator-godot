(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{373:function(t,s,e){t.exports=e.p+"assets/img/activate_plugin.1bbe11d8.png"},374:function(t,s,e){t.exports=e.p+"assets/img/add_plugin_to_tilemap.6dc3dd05.png"},375:function(t,s,e){t.exports=e.p+"assets/img/added_liquidsim_node.44d17cc3.png"},376:function(t,s,e){t.exports=e.p+"assets/img/adjust_cell_size.cabdf114.png"},453:function(t,s,e){"use strict";e.r(s);var a=e(65),n=Object(a.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("iframe",{attrs:{width:"100%",height:"400",src:"https://www.youtube.com/embed/nF7cdUVgvNc",title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""}}),t._v(" "),a("h1",{attrs:{id:"guide"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#guide"}},[t._v("#")]),t._v(" Guide")]),t._v(" "),a("p",[t._v("Ce guide vous apprendra comment compiler et ajouter le plugin à un nouveau projet de "),a("strong",[t._v("Godot engine")]),t._v(".")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),a("p",[t._v("Essayez une démo du plugin "),a("RouterLink",{attrs:{to:"/fr/game/"}},[t._v("ici")])],1)]),t._v(" "),a("h2",{attrs:{id:"conditions-prealables"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#conditions-prealables"}},[t._v("#")]),t._v(" Conditions préalables.")]),t._v(" "),a("p",[t._v("Pour le développement de ce guide, nous devons avoir les éléments suivants installés dans notre système :")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),a("ul",[a("li",[t._v("Godot engine 3.x")]),t._v(" "),a("li",[t._v("Compilateur C++")]),t._v(" "),a("li",[t._v("Outil de construction de Scons")]),t._v(" "),a("li",[t._v("Outil de construction Emscripten 2.0.17 (En cas de construction pour le web "),a("strong",[t._v('"wasm"')]),t._v(").")])])]),t._v(" "),a("h2",{attrs:{id:"depot-de-clones"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#depot-de-clones"}},[t._v("#")]),t._v(" Dépôt de clones.")]),t._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[t._v("WARNING")]),t._v(" "),a("p",[t._v("Il est probable que vous trouviez des différences entre le référentiel d'origine et ce référentiel, si vous allez utiliser le référentiel "),a("strong",[t._v('"tterrasson"')]),t._v(" d' origine , je vous recommande de suivre les instructions que vous y trouverez, car il peut y avoir des différences dans la façon dont le plugin est installé.")])]),t._v(" "),a("p",[t._v("Dépôt d'origine.")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" clone --recurse-submodules https://github.com/tterrasson/liquid-simulator-godot\n")])])]),a("p",[t._v("Ce référentiel.")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" clone --recurse-submodules https://github.com/AJ-Wi/liquid-simulator-godot\n")])])]),a("h2",{attrs:{id:"compiler-le-binaire"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#compiler-le-binaire"}},[t._v("#")]),t._v(" Compiler le binaire.")]),t._v(" "),a("p",[t._v("Dans cette section, nous verrons comment compiler à la fois le binaire godot-cpp et notre plugin.")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),a("p",[t._v("Dans les commandes suivantes, nous devons remplacer "),a("strong",[t._v('"<os>"')]),t._v(" par la plate-forme sur laquelle nous voulons exécuter notre jeu :")]),t._v(" "),a("ul",[a("li",[t._v("windows")]),t._v(" "),a("li",[t._v("linux")]),t._v(" "),a("li",[t._v("osx")]),t._v(" "),a("li",[t._v("javascript")]),t._v(" "),a("li",[t._v("andorid")])])]),t._v(" "),a("h3",{attrs:{id:"binaire-godot-cpp"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#binaire-godot-cpp"}},[t._v("#")]),t._v(" binaire godot-cpp.")]),t._v(" "),a("p",[t._v("Nous devons compiler le binaire godot-cpp en fonction de la plate-forme sur laquelle nous voulons exécuter notre jeu, pour cela nous devons être positionnés dans le dossier godot-cpp de notre terminal.")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" liquid-simulator-godot/godot-cpp\n$ scons "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("platform")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("os"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("generate_bindings")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("yes\n")])])]),a("h3",{attrs:{id:"binaire-du-plugin"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#binaire-du-plugin"}},[t._v("#")]),t._v(" binaire du plugin.")]),t._v(" "),a("p",[t._v("Une fois le binaire godot-cpp compilé, nous retournons au dossier racine du projet et compilons le plugin.")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("\n$ scons "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("platform")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("os"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),a("h2",{attrs:{id:"copiez-le-plugin-dans-votre-projet"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#copiez-le-plugin-dans-votre-projet"}},[t._v("#")]),t._v(" Copiez le plugin dans votre projet.")]),t._v(" "),a("p",[t._v("À ce stade, vous trouverez le plugin compilé dans le dossier "),a("strong",[t._v('"bin"')]),t._v(" du projet, il vous suffit de copier ce dossier dans le dossier "),a("strong",[t._v('"addons"')]),t._v(" de votre projet, et de renommer le dossier du plugin en "),a("strong",[t._v('"liquidsim"')]),t._v(", vous pouvez également exécuter la commande suivante.")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("cp")]),t._v(" -r bin/* /ruta/a/tuproyecto/addons/liquidsim\n")])])]),a("p",[t._v("Vous devriez vous retrouver avec la structure de fichiers suivante dans votre projet.")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v(".\ntuproyecto\n    ├── addons\n    |    └── liquidsim\n    |        ├── assets\n    |        |   ├── icon.png\n    |        |   ├── lava.png\n    |        |   └── water.png\n    |        ├── lib\n    |        |   └── `libliquidsim.so` (segun el que hayas compilado.)\n    |        ├── LiquidSim.tscn\n    |        ├── liquidsim_plugin.gd\n    |        ├── liquidsim.gdnlib\n    |        ├── liquuidsim.gdns\n    |        └── plugin.cfg\n    ├── default_env.tres\n    ├── icon.png\n    ├── project.godot\n")])])]),a("h2",{attrs:{id:"activez-le-plugin"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#activez-le-plugin"}},[t._v("#")]),t._v(" Activez le plugin.")]),t._v(" "),a("p",[t._v("Pour cela, vous accédez à la configuration de votre projet et "),a("strong",[t._v('"LiquidSim"')]),t._v(" apparaîtra dans la section plugin, vous n'aurez plus qu'à l'activer.")]),t._v(" "),a("p",[a("img",{attrs:{src:e(373),alt:"alt img"}})]),t._v(" "),a("h2",{attrs:{id:"ajouter-un-nœud"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ajouter-un-nœud"}},[t._v("#")]),t._v(" Ajouter un nœud.")]),t._v(" "),a("p",[t._v("Une fois activé, le plugin apparaît déjà dans la liste des nœuds de l'éditeur.")]),t._v(" "),a("p",[a("img",{attrs:{src:e(374),alt:"alt img"}})]),t._v(" "),a("p",[t._v("Pour que notre nouveau nœud ou plugin fonctionne, nous devons l'ajouter en tant que nœud enfant d'un "),a("strong",[t._v('"TileMap"')]),t._v(".")]),t._v(" "),a("p",[a("img",{attrs:{src:e(375),alt:"alt img"}})]),t._v(" "),a("h2",{attrs:{id:"parametre-de-plug-in"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#parametre-de-plug-in"}},[t._v("#")]),t._v(" Paramètre de plug-in.")]),t._v(" "),a("p",[t._v("Ajustez la taille des cellules du plugin en fonction de la taille des cellules de votre "),a("strong",[t._v('"TileMap"')]),t._v(".")]),t._v(" "),a("p",[a("img",{attrs:{src:e(376),alt:"alt img"}})]),t._v(" "),a("h2",{attrs:{id:"essayez-le-plugin"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#essayez-le-plugin"}},[t._v("#")]),t._v(" Essayez le plugin.")]),t._v(" "),a("p",[t._v("Attachez un gdscript au "),a("strong",[t._v('"TileMap"')]),t._v(" pour tester le plugin, vous pouvez utiliser l'exemple de code suivant.")]),t._v(" "),a("div",{staticClass:"language-py extra-class"},[a("pre",{pre:!0,attrs:{class:"language-py"}},[a("code",[t._v("extends TileMap\n\nfunc _ready"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("pass")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Replace with function body.")]),t._v("\n\nfunc _input"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("event"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" event "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("is")]),t._v(" InputEventMouseButton"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Mouse in viewport coordinates")]),t._v("\n\t\tvar wpos "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" world_to_map"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("get_global_mouse_position"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t\t$LiquidSim"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("add_liquid"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("wpos"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("x"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" wpos"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("y"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10.0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("h2",{attrs:{id:"api"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#api"}},[t._v("#")]),t._v(" API.")]),t._v(" "),a("div",{staticClass:"language-py extra-class"},[a("pre",{pre:!0,attrs:{class:"language-py"}},[a("code",[t._v("$LiquidSim"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("start"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Démarre la simulation "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Démarré par défaut"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n$LiquidSim"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("stop"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Arrête la simulation\n$LiquidSim"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("update_simulation"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Force la mise à jour de la simulation\n$LiquidSim"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cleanup_empty_cells"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Nettoyer toutes les cellules vides "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("automatique"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n$LiquidSim"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("add_liquid"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("int")]),t._v(" x"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("int")]),t._v(" y"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("float")]),t._v(" amount"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Ajoute du liquide à la cellule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n$LiquidSim"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("del_liquid"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("int")]),t._v(" x"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("int")]),t._v(" y"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" vide une cellule\n$LiquidSim"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("set_liquid"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("int")]),t._v(" x"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("int")]),t._v(" y"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("float")]),t._v(" amount"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" définit une quantité fixe de liquide dans la cellule\n$LiquidSim"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get_liquid"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("int")]),t._v(" x"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("int")]),t._v(" y"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("float")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Renvoie la quantité de liquide contenue dans la cellule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n")])])]),a("h2",{attrs:{id:"problemes-de-compilation"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#problemes-de-compilation"}},[t._v("#")]),t._v(" Problèmes de compilation.")]),t._v(" "),a("p",[t._v("Comme mentionné au début, si vous travaillez avec la version "),a("a",{attrs:{href:"https://github.com/tterrasson/liquid-simulator-godot",target:"_blank",rel:"noopener noreferrer"}},[t._v('"originale"'),a("OutboundLink")],1),t._v(" du plugin, suivez les instructions de ce référentiel.")]),t._v(" "),a("p",[t._v("Si vous continuez à travailler avec la version de ce référentiel, je vous laisserai une astuce ou une solution à un problème que j'ai rencontré en cours de route et mon expérience vous aidera probablement.")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),a("p",[t._v("Au moment de compiler le plugin pour la version web, j'ai trouvé que le script "),a("strong",[t._v('"SConstruct"')]),t._v(" ne contenait pas le fragment de code nécessaire pour cette tâche, j'ai récupéré un script bash des dépôts "),a("strong",[t._v('"godot-cpp"')]),t._v(" pour compiler vers la version html5 , cependant, cette compilation m'a posé de nombreux problèmes, et même avec peu d'informations pour la résoudre, la recommandation de la documentation "),a("strong",[t._v('"godot"')]),t._v(" , quant à la version de "),a("strong",[t._v('"Emscripten"')]),t._v(" est 1.39.9, après tant de tentatives et de recherches j'ai pu pour conclure que pour la compilation de ce plugin la version de "),a("strong",[t._v('"Emscripten"')]),t._v(" que nous devrions utiliser est 2.0.17, et pour plus de commodité, ajoutez l'extrait de code manquant pour cette opération dans le fichier "),a("strong",[t._v('"SConstruct"')]),t._v(" , afin que nous puissions directement exécuter la commande "),a("strong",[t._v('"scons"')]),t._v(" avec en plus que nous devrions utiliser l' attribut "),a("strong",[t._v('"emscripten"')]),t._v(" pour fournir le chemin vers notre outil de compilation, voici un exemple :")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("$ scons "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("platform")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("javascript "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("emscripten")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/usr/bin/emscriptem/\n")])])])]),t._v(" "),a("p",[t._v("Pour plus de détails, voir "),a("a",{attrs:{href:"https://docs.godotengine.org/en/3.2/tutorials/plugins/gdnative/gdnative-cpp-example.html#using-the-gdnative-module",target:"_blank",rel:"noopener noreferrer"}},[t._v('"Utiliser le module GDNative"'),a("OutboundLink")],1)])])}),[],!1,null,null,null);s.default=n.exports}}]);